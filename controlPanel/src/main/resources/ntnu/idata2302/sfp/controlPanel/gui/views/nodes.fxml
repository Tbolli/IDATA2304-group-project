<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="900" prefWidth="1440"
            style="-fx-background-color: #D8F3DC;"
            stylesheets="@/ntnu/idata2302/sfp/controlPanel/gui/styles/nodes.css"
            xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="ntnu.idata2302.sfp.controlPanel.gui.controllers.NodesController">

    <!-- SIDEBAR -->
    <left>
        <VBox alignment="TOP_CENTER" prefWidth="200" spacing="25"
              style="-fx-background-color: #80ED99;">
            <ImageView fitHeight="90" fitWidth="90">
                <image>
                    <Image url="@/ntnu/idata2302/sfp/controlPanel/images/SMF_Logo.png"/>
                </image>
            </ImageView>

            <!-- Navigation Buttons -->
            <Button text="Home" onAction="#openHome" styleClass="sidebar-btn"/>
            <Button text="Nodes" styleClass="sidebar-btn-active"/>
            <Button text="DataLog" onAction="#openDataLog" styleClass="sidebar-btn"/>
        </VBox>
    </left>

    <!-- MAIN CONTENT -->
    <center>
        <AnchorPane>

            <!-- Page Title -->
            <Label fx:id="pageTitle"
                   text="Smart Farming System"
                   styleClass="page-title"
                   AnchorPane.leftAnchor="240" AnchorPane.topAnchor="30"/>

            <!-- Section Header -->
            <Label text="Nodes" styleClass="section-title"
                   AnchorPane.leftAnchor="240" AnchorPane.topAnchor="90"/>

            <!-- Table for Node Overview -->
            <TableView fx:id="nodesTable"
                       styleClass="nodes-table"
                       AnchorPane.topAnchor="130"
                       AnchorPane.leftAnchor="240"
                       AnchorPane.rightAnchor="480"
                       AnchorPane.bottomAnchor="80">

                <columns>
                    <TableColumn fx:id="colId" text="Node ID" prefWidth="120"/>
                    <TableColumn fx:id="colIp" text="IP Address" prefWidth="150"/>
                    <TableColumn fx:id="colStatus" text="Status" prefWidth="120"/>
                    <TableColumn fx:id="colSensor" text="Sensor Type" prefWidth="140"/>
                    <TableColumn fx:id="colInfo" text="Info" prefWidth="180"/>
                </columns>
            </TableView>

            <!-- DETAILS PANEL -->
            <VBox spacing="12" prefWidth="350"
                  styleClass="details-box"
                  AnchorPane.topAnchor="130"
                  AnchorPane.rightAnchor="70"
                  AnchorPane.bottomAnchor="80">
                <Label fx:id="detailTitle"
                       text="Node 001 (192.168.0.10)"
                       styleClass="details-title"/>
                <Label fx:id="detailTemp"
                       text="ðŸŒ¡ Temperature: 23Â°C"
                       styleClass="details-text"/>
                <Label fx:id="detailHumidity"
                       text="ðŸ’§ Humidity: 49%"
                       styleClass="details-text"/>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ”¥ Heater" styleClass="details-text"/>
                    <ToggleButton fx:id="heaterToggle" onAction="#onToggleHeater"
                                  text="OFF" styleClass="toggle-off"/>
                </HBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸŒ€ Fan" styleClass="details-text"/>
                    <ToggleButton fx:id="fanToggle" onAction="#onToggleFan"
                                  text="ON" styleClass="toggle-on"/>
                </HBox>

                <Region VBox.vgrow="ALWAYS"/>

                <Button fx:id="refreshBtn" onAction="#onRefresh"
                        text="Refresh" styleClass="refresh-btn"/>
            </VBox>
        </AnchorPane>
    </center>
</BorderPane>
