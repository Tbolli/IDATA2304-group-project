<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="900" prefWidth="1440" style="-fx-background-color: #D8F3DC;"
            stylesheets="@/ntnu/idata2302/sfp/controlPanel/gui/styles/nodes.css"
            xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="ntnu.idata2302.sfp.controlPanel.gui.controllers.NodesController">

    <!-- SIDEBAR -->
    <left>
        <VBox alignment="TOP_CENTER" prefWidth="200" spacing="25" style="-fx-background-color: #80ED99;">
            <ImageView fitHeight="211.0" fitWidth="205.0">
                <image>
                    <Image url="@/ntnu/idata2302/sfp/controlPanel/images/SMF_Logo.png"/>
                </image>
            </ImageView>

            <!-- Navigation Buttons -->
            <Button onAction="#openHome" styleClass="sidebar-btn" text="Home"/>
            <Button styleClass="sidebar-btn-active" text="Nodes"/>
            <Button onAction="#openDataLog" styleClass="sidebar-btn" text="DataLog"/>
        </VBox>
    </left>

    <!-- MAIN CONTENT -->
    <center>
        <AnchorPane>

            <!-- Page Title -->
            <Label fx:id="pageTitle" styleClass="page-title" text="Smart Farming System" AnchorPane.leftAnchor="240"
                   AnchorPane.topAnchor="30"/>

            <!-- Section Header -->
            <Label styleClass="section-title" text="Nodes" AnchorPane.leftAnchor="240" AnchorPane.topAnchor="90"/>

            <!-- Table for Node Overview -->
            <TableView fx:id="nodesTable" styleClass="nodes-table" AnchorPane.bottomAnchor="80"
                       AnchorPane.leftAnchor="240" AnchorPane.rightAnchor="480" AnchorPane.topAnchor="130">

                <columns>
                    <TableColumn fx:id="colId" prefWidth="120" text="Node ID"/>
                    <TableColumn fx:id="colIp" prefWidth="150" text="IP Address"/>
                    <TableColumn fx:id="colStatus" prefWidth="120" text="Status"/>
                    <TableColumn fx:id="colSensor" prefWidth="140" text="Sensor Type"/>
                    <TableColumn fx:id="colInfo" prefWidth="180" text="Info"/>
                </columns>
            </TableView>

            <!-- DETAILS PANEL -->
            <VBox prefWidth="350" spacing="12" styleClass="details-box" AnchorPane.bottomAnchor="80"
                  AnchorPane.rightAnchor="70" AnchorPane.topAnchor="130">
                <Label fx:id="detailTitle" styleClass="details-title" text="Node 001 (192.168.0.10)"/>
                <Label fx:id="detailTemp" styleClass="details-text" text="ðŸŒ¡ Temperature: 23Â°C"/>
                <Label fx:id="detailHumidity" styleClass="details-text" text="ðŸ’§ Humidity: 49%"/>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label styleClass="details-text" text="ðŸ”¥ Heater"/>
                    <ToggleButton fx:id="heaterToggle" onAction="#onToggleHeater" styleClass="toggle-off" text="OFF"/>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label styleClass="details-text" text="ðŸŒ€ Fan"/>
                    <ToggleButton fx:id="fanToggle" onAction="#onToggleFan" styleClass="toggle-on" text="ON"/>
                </HBox>

                <Region VBox.vgrow="ALWAYS"/>

                <Button fx:id="refreshBtn" onAction="#onRefresh" styleClass="refresh-btn" text="Refresh"/>
            </VBox>
        </AnchorPane>
    </center>
</BorderPane>
